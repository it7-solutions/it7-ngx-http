{
  "version": 3,
  "file": "it7-ngx-it7-http.js",
  "sources": [
    "ng://@it7-ngx/it7-http/out/src/it7-http.module.ts",
    "ng://@it7-ngx/it7-http/out/src/it7-ajax.service.ts"
  ],
  "sourcesContent": [
    "import { ModuleWithProviders, NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { HttpModule } from '@angular/http';\r\nimport { It7AjaxService } from './it7-ajax.service';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, HttpModule]\r\n})\r\nexport class It7HttpModule {\r\n  public static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: It7HttpModule,\r\n      providers: [It7AjaxService]\r\n    };\r\n  }\r\n}\r\n",
    "import { Injectable } from '@angular/core';\r\nimport {\r\n  Headers,\r\n  Http,\r\n  Response,\r\n  RequestOptions,\r\n  URLSearchParams as ngURLSearchParams,\r\n  QueryEncoder\r\n} from '@angular/http';\r\nimport 'rxjs/add/operator/toPromise';\r\n\r\n// import {It7ErrorService} from \"./it7-error.service\";\r\n\r\nclass TrueQueryEncoder extends QueryEncoder {\r\n  encodeKey(k: string): string {\r\n    return encodeURIComponent(k);\r\n  }\r\n\r\n  encodeValue(v: string): string {\r\n    return encodeURIComponent(v);\r\n  }\r\n}\r\n\r\ninterface It7AjaxResponse {\r\n  error: number;\r\n  errorMessage: string;\r\n  data: any;\r\n}\r\n\r\n@Injectable()\r\nexport class It7AjaxService {\r\n  constructor(private http: Http) {}\r\n\r\n  post(url: string, data: any): Promise<any> {\r\n    const headers = new Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });\r\n    const options = new RequestOptions({ headers: headers });\r\n\r\n    // if(this.config.mockAJAX){return Promise.resolve(this.getMockData(url, data));}\r\n    return this.http\r\n      .post(url, this.urlEncode(data), options)\r\n      .toPromise()\r\n      .then(res => this.checkResponse(res))\r\n      .catch(error => {\r\n        this.handleError('Request error: ' + error.message);\r\n      });\r\n  }\r\n\r\n  private urlEncode(obj: any): string {\r\n    const urlSearchParams = new ngURLSearchParams('', new TrueQueryEncoder());\r\n    for (const key in obj) {\r\n      if (obj.hasOwnProperty(key)) {\r\n        urlSearchParams.append(key, obj[key]);\r\n      }\r\n    }\r\n    return urlSearchParams.toString();\r\n  }\r\n\r\n  private checkResponse(res: Response): any {\r\n    const response = res.json();\r\n    if (response.error) {\r\n      // this.err.fire('Server request error: ' + response.errorMessage);\r\n      alert('Server request error: ' + response.errorMessage);\r\n    }\r\n    return res.json().data;\r\n  }\r\n\r\n  private handleError(error: any) {\r\n    // this.err.fire('Server connection error: ' + error);\r\n    alert('Server connection error: ' + error);\r\n    return Promise.reject(error.message || error);\r\n  }\r\n\r\n  // private getMockData(url: string = '', data: any = undefined):any {\r\n  //     var m = 'function' === typeof this.config.mockAJAX ? this.config.mockAJAX(url, data) : {};\r\n  //     return m;\r\n  // }\r\n}\r\n"
  ],
  "names": [
    "ngURLSearchParams"
  ],
  "mappings": ";;;;;;;;;ACAA,AAaA,MAAA,gBAAuB,SAAQ,YAAY,CAA3C;;;;;IACE,SAAS,CAAC,CAAS,EAArB;QACI,OAAO,kBAAkB,CAAC,CAAC,CAAC,CAAC;KAC9B;;;;;IAED,WAAW,CAAC,CAAS,EAAvB;QACI,OAAO,kBAAkB,CAAC,CAAC,CAAC,CAAC;KAC9B;CACF;AASD,MAAA,cAAA,CAAA;;;;IACE,WAAF,CAAsB,IAAU,EAAhC;QAAsB,IAAtB,CAAA,IAA0B,GAAJ,IAAI,CAAM;KAAI;;;;;;IAElC,IAAI,CAAC,GAAW,EAAE,IAAS,EAA7B;QACI,uBAAM,OAAO,GAAG,IAAI,OAAO,CAAC,EAAE,cAAc,EAAE,mCAAmC,EAAE,CAAC,CAAC;QACrF,uBAAM,OAAO,GAAG,IAAI,cAAc,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;;QAGzD,OAAO,IAAI,CAAC,IAAI;aACb,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,OAAO,CAAC;aACxC,SAAS,EAAE;aACX,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;aACpC,KAAK,CAAC,KAAK,IAAlB;YACQ,IAAI,CAAC,WAAW,CAAC,iBAAiB,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC;SACrD,CAAC,CAAC;KACN;;;;;IAEO,SAAS,CAAC,GAAQ,EAA5B;QACI,uBAAM,eAAe,GAAG,IAAIA,eAAiB,CAAC,EAAE,EAAE,IAAI,gBAAgB,EAAE,CAAC,CAAC;QAC1E,KAAK,uBAAM,GAAG,IAAI,GAAG,EAAE;YACrB,IAAI,GAAG,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE;gBAC3B,eAAe,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;aACvC;SACF;QACD,OAAO,eAAe,CAAC,QAAQ,EAAE,CAAC;;;;;;IAG5B,aAAa,CAAC,GAAa,EAArC;QACI,uBAAM,QAAQ,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC;QAC5B,IAAI,QAAQ,CAAC,KAAK,EAAE;;YAElB,KAAK,CAAC,wBAAwB,GAAG,QAAQ,CAAC,YAAY,CAAC,CAAC;SACzD;QACD,OAAO,GAAG,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC;;;;;;IAGjB,WAAW,CAAC,KAAU,EAAhC;;QAEI,KAAK,CAAC,2BAA2B,GAAG,KAAK,CAAC,CAAC;QAC3C,OAAO,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,CAAC;;;;IAxClD,EAAA,IAAA,EAAC,UAAU,EAAX;;;;;;;;IA1BA,EAAA,IAAA,EAAE,IAAI,GAAN;;;;;;;ADHA,AAQA,MAAA,aAAA,CAAA;;;;IACS,OAAO,OAAO,GAAvB;QACI,OAAO;YACL,QAAQ,EAAE,aAAa;YACvB,SAAS,EAAE,CAAC,cAAc,CAAC;SAC5B,CAAC;;;;IARN,EAAA,IAAA,EAAC,QAAQ,EAAT,IAAA,EAAA,CAAU;gBACR,OAAO,EAAE,CAAC,YAAY,EAAE,UAAU,CAAC;aACpC,EAAD,EAAA;;;;;;;;;;;;;;;;;;;;"
}
